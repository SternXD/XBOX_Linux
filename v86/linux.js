var fs=require("fs"),V86=require("./libv86.js").V86;function readfile(a){return(new Uint8Array(fs.readFileSync(a))).buffer}var bios=readfile(__dirname+"/seabios.bin"),linux=readfile(__dirname+"/linux.img");process.stdin.setRawMode(!0);process.stdin.resume();process.stdin.setEncoding("utf8");console.log("Now booting, please stand by ...");var emulator=new V86({memory_size:4.1875931136E9,bios:{buffer:bios},hda:{buffer:linux,async:!0},acpi:!1,autostart:!0});
emulator.add_listener("serial0-output-byte",function(a){a=String.fromCharCode(a);"~">=a&&process.stdout.write(a)});process.stdin.on("data",function(a){"\u0003"===a?(emulator.stop(),process.stdin.pause()):emulator.serial0_send(a)});
